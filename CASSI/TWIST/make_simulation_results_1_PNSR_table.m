
%% code ordering
filename_ordering = { '2_2', ...
                      '2_1', ...
                      '2_3', ...
                      '1_2', ...
                      '3_2', ...
                      '1_1', ...
                      '1_3', ...
                      '3_1', ...
                      '3_3' };

%% Generate synthetic images
make_simulation_results_synthesize_cassi;

%% call cassi
n_data = length( dataset_name );
n_multisamples = 2;

for i = 1:n_data
    name = dataset_name{ i };
    input_cassi_dir = fullfile( output_dir_for_synthetic_cassi, name );
    output_spectrum_dir = fullfile( output_dir, ['recon_', num2str( n_multisamples ), '_samples' ]);
   

    make_simulation_results_cassi(  name, ...
                                    input_cassi_dir,...
                                    input_code_dir,...
                                    filename_ordering, ...
                                    n_multisamples, ...
                                    input_dispersion_csv,...
                                    output_spectrum_dir,...
                                    flipped);
end

